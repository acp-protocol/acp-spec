# ACP JSON Schemas

This directory contains the official JSON Schema definitions for all ACP file formats.

## Schemas

| Schema | File Pattern | Description |
|--------|--------------|-------------|
| [cache.schema.json](v1/cache.schema.json) | `.acp.cache.json` | Indexed codebase metadata generated by `acp index` |
| [vars.schema.json](v1/vars.schema.json) | `.acp.vars.json` | Reusable context variables for AI expansion |
| [config.schema.json](v1/config.schema.json) | `.acp.config.json` | Project configuration for ACP tooling |

## Usage

### In Your Editor

Most modern editors automatically fetch schemas from [JSON Schema Store](https://www.schemastore.org/). Once ACP schemas are registered, you'll get automatic validation and autocomplete for ACP files.

### Manual Schema Reference

Add a `$schema` property to your ACP files for explicit validation:

```json
{
  "$schema": "https://acp-protocol.dev/schemas/v1/config.schema.json",
  "version": "1.0",
  "include": ["src/**/*"]
}
```

### Programmatic Validation

```bash
# Using ajv-cli
npm install -g ajv-cli
ajv validate -s schemas/v1/cache.schema.json -d .acp.cache.json

# Using check-jsonschema
pip install check-jsonschema
check-jsonschema --schemafile schemas/v1/cache.schema.json .acp.cache.json
```

## Versioning

Schemas follow the ACP specification version. Breaking changes require a major version bump.

```
schemas/
├── v1/          # ACP 1.x schemas
├── v2/          # (future) ACP 2.x schemas
└── meta/        # Meta-schemas for annotation validation
```

## Schema Store Registration

These schemas are registered with [JSON Schema Store](https://www.schemastore.org/) for automatic editor support.

**Catalog entries** (for reference when updating Schema Store):

```json
{
  "name": "ACP Cache",
  "description": "AI Context Protocol cache file containing indexed codebase metadata for AI assistants",
  "fileMatch": [".acp.cache.json", "*.acp.cache.json"],
  "url": "https://acp-protocol.dev/schemas/v1/cache.schema.json"
}
```

```json
{
  "name": "ACP Variables",
  "description": "AI Context Protocol variables file defining reusable context snippets",
  "fileMatch": [".acp.vars.json", "*.acp.vars.json"],
  "url": "https://acp-protocol.dev/schemas/v1/vars.schema.json"
}
```

```json
{
  "name": "ACP Config",
  "description": "AI Context Protocol configuration file for indexing and behavior settings",
  "fileMatch": [".acp.config.json"],
  "url": "https://acp-protocol.dev/schemas/v1/config.schema.json"
}
```

To update Schema Store registration, submit a PR to [SchemaStore/schemastore](https://github.com/SchemaStore/schemastore) modifying `src/api/json/catalog.json`.

## Contributing

Schema changes require an RFC. See [/rfcs/README.md](/rfcs/README.md) for the proposal process.