# Spec Directive Remediation Summary

<!--
This summary is generated by /acp.spec-remediate.
It tracks all changes made to bring the spec into RFC-001 compliance.
Useful for changelog generation and review.
-->

**Generated**: [TIMESTAMP]
**Spec Version**: [OLD_VERSION] → [NEW_VERSION]
**RFC Reference**: RFC-001 (Self-Documenting Annotations)
**Decisions File**: [DECISIONS_PATH]
**Backup Location**: [BACKUP_PATH]

---

## Remediation Overview

| Metric | Value |
|--------|-------|
| Files Modified | [FILE_COUNT] |
| Sections Added | [SECTION_COUNT] |
| Examples Updated | [EXAMPLE_COUNT] |
| Lines Changed | +[ADDED] / -[REMOVED] |
| Duration | [DURATION] |

---

## Decisions Applied

| ID | Question | Decision | Impact |
|----|----------|----------|--------|
| Q01 | Directive requirement | [CHOICE]: [LABEL] | [IMPACT] |
| Q02 | Max directive length | [CHOICE]: [LABEL] | [IMPACT] |
| Q03 | Conflict resolution | [CHOICE]: [LABEL] | [IMPACT] |
| Q04 | Auto-generated format | [CHOICE]: [LABEL] | [IMPACT] |
| Q05 | Localization | [CHOICE]: [LABEL] | [IMPACT] |
| Q06 | Symbol inheritance | [CHOICE]: [LABEL] | [IMPACT] |
| Q07 | CLI warnings | [CHOICE]: [LABEL] | [IMPACT] |
| Q08 | Cache storage | [CHOICE]: [LABEL] | [IMPACT] |

---

## Changes by File

### spec/ACP-1.0.md

| Change | Type | Lines |
|--------|------|-------|
| [DESCRIPTION] | [ADD/MODIFY/REMOVE] | [LINES] |

**Diff preview**:
```diff
- [OLD_CONTENT]
+ [NEW_CONTENT]
```

---

### spec/chapters/02-annotation-syntax.md

#### New Sections Added

| Section | Title | Lines Added |
|---------|-------|-------------|
| 2.3 | Directive Suffix | ~45 |
| 2.4 | Multi-line Directives | ~20 |
| 2.5 | Standard Directive Language | ~60 |
| 2.6 | Directive Requirements | ~30 |

#### Modified Sections

| Section | Changes |
|---------|---------|
| 2.8 Examples | Updated [X] examples to include directive suffixes |

---

### spec/chapters/03-cache-format.md

#### Schema Additions

| Field | Location | Type | Description |
|-------|----------|------|-------------|
| `directive` | `annotations[]` | string | Self-documenting instruction |
| `purpose` | `files[]` | string | File/module purpose |
| `symbols` | `files[]` | array | Symbol-level annotations |
| `inline` | `files[]` | array | Inline annotation markers |
| `auto_generated` | `annotations[]` | boolean | Flag for generated directives |

#### Updated Examples

| Example | Section | Changes |
|---------|---------|---------|
| Basic annotation | 3.2 | Added directive field |
| Full cache | 3.5 | Added symbols and inline arrays |
| Constraint output | 3.7 | Added directive to aggregation |

---

### spec/chapters/05-annotations.md

#### New Annotation Types

| Annotation | Category | Recommended Directive |
|------------|----------|----------------------|
| `@acp:purpose` | File | `<desc>` (file/module purpose) |
| `@acp:fn` | Symbol | `<function description>` |
| `@acp:class` | Symbol | `<class description>` |
| `@acp:method` | Symbol | `<method description>` |
| `@acp:param` | Symbol | `<parameter description>` |
| `@acp:returns` | Symbol | `<return value description>` |
| `@acp:throws` | Symbol | `<exception description>` |
| `@acp:critical` | Inline | `<desc> - Security/stability critical` |
| `@acp:todo` | Inline | `<pending work description>` |
| `@acp:fixme` | Inline | `<known issue description>` |
| `@acp:perf` | Inline | `<performance consideration>` |

#### Updated Annotation Entries

| Annotation | Changes |
|------------|---------|
| `@acp:lock` | Added standard directives for all levels |
| `@acp:ref` | Added recommended directive format |
| `@acp:style` | Added recommended directive format |
| `@acp:hack` | Added directive suffix requirement |
| `@acp:deprecated` | Added directive suffix requirement |

---

### spec/chapters/06-constraints.md

| Change | Description |
|--------|-------------|
| Output format | Added directive display to `acp constraints` output |
| Aggregation | Documented directive aggregation from annotations |
| Conflict resolution | Added rules per Q03 decision |

---

### spec/chapters/13-tool-integration.md

| Change | Description |
|--------|-------------|
| Minimal bootstrap | Added section with ~40 token bootstrap |
| Extended bootstrap | Added optional extended version |
| Primer awareness | Updated primer sections for directives |

---

## Validation Results

### RFC-001 Checklist

| Category | Before | After | Status |
|----------|--------|-------|--------|
| Annotation Format | 2/6 | 6/6 | ✓ Complete |
| Cache Format | 1/5 | 5/5 | ✓ Complete |
| Hierarchical Annotations | 1/4 | 4/4 | ✓ Complete |
| Bootstrap Prompt | 0/3 | 3/3 | ✓ Complete |
| New Annotation Types | 0/11 | 11/11 | ✓ Complete |

### Audit Rerun

```
Status: PASS
Blockers: 0 (was [PREV_BLOCKERS])
Violations: 0 (was [PREV_VIOLATIONS])
Warnings: [WARNINGS] (was [PREV_WARNINGS])
```

---

## Breaking Changes

<!--
List any changes that may affect existing implementations.
-->

| Change | Impact | Migration |
|--------|--------|-----------|
| [CHANGE_DESC] | [IMPACT_DESC] | [MIGRATION_STEPS] |

**Note**: Per decision Q01=[CHOICE], [BREAKING_CHANGE_NOTE]

---

## Rollback Instructions

If remediation needs to be reverted:

```bash
./scripts/rollback-spec.sh --backup [BACKUP_PATH]
```

This will restore all spec files to their pre-remediation state.

---

## Next Steps

1. [ ] Run `/acp.spec-verify-cache` to ensure cache schema compatibility
2. [ ] Update `schemas/v1/cache.schema.json` with new fields
3. [ ] Update CLI implementation to generate directive fields
4. [ ] Generate changelog entry for spec release
5. [ ] Update documentation website

---

## Appendix: Full Diff

<!--
Optional: Include full git diff or file-by-file changes
-->

<details>
<summary>Click to expand full diff</summary>

```diff
[FULL_DIFF_CONTENT]
```

</details>

---

## Sign-off

| Role | Name | Date |
|------|------|------|
| Remediation | [AGENT] | [DATE] |
| Review | [REVIEWER] | [DATE] |
| Approval | [APPROVER] | [DATE] |